<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Configuración básica del documento -->
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Blog and Reviews</title>

  <!-- Carga de archivos estáticos (como CSS de Tailwind) -->
  {% load static %}
  <link href="{% static 'src/output.css' %}" rel="stylesheet">
</head>
<body id="body" class="flex flex-col min-h-screen transition-all duration-700 ease-in-out">

  <!--  BARRA DE NAVEGACIÓN -->
  <nav class="bg-white dark:bg-gradient-to-r dark:from-gray-900 dark:to-gray-700 shadow-md py-4 px-6 transition-colors">
    <div class="max-w-6xl mx-auto flex justify-between items-center">

      <!-- Logo con enlace a la lista de blogs -->
      <a href="{% url 'blogapp:blog_list' %}" class="text-gray-900 dark:text-white text-2xl font-semibold tracking-wider transition-colors">
        BlogSpace
      </a>

      <!-- Sección de botones de la derecha -->
      <div class="flex items-center space-x-4">
        {% if user.is_authenticated %}
          <!--  BOTÓN: Crear nuevo blog (solo si el usuario está logueado) -->
          <a href="{% url 'blogapp:add_blog' %}" class="bg-amber-700 hover:bg-blue-600 text-white dark:bg-blue-600 dark:hover:bg-blue-700 dark:text-white font-medium py-2 px-4 rounded transition-all duration-500 ease-in-out">
            New Blog
          </a>

          <!--  FORMULARIO DE CIERRE DE SESIÓN (logout) con método POST -->
          <!-- Se reemplazó el enlace simple por un formulario seguro -->
          <form method="post" action="{% url 'blogapp:logout' %}" class="inline">
            {% csrf_token %}
            <button type="submit" class="text-gray-700 dark:text-white hover:underline transition-colors">
              Cerrar sesión
            </button>
          </form>
        {% else %}
          <!--  ENLACES para login y registro si el usuario NO está autenticado -->
          <a href="{% url 'blogapp:login' %}" class="text-gray-700 dark:text-white hover:underline transition-colors">
            Iniciar sesión
          </a>
          <a href="{% url 'blogapp:signup' %}" class="text-gray-700 dark:text-white hover:underline transition-colors">
            Registrarse
          </a>
        {% endif %}
      </div>
    </div>
  </nav>

  <!--  CONTENIDO PRINCIPAL -->
  <main class="flex-grow w-full bg-white dark:bg-gray-900 transition-all duration-700 ease-in-out">
    <div class="max-w-4xl mx-auto px-4 py-8">

      <!-- MENSAJES FLASH (mensajes de error, éxito, etc.) -->
      {% if messages %}
        <div class="container mx-auto mt-4">
          {% for message in messages %}
            <div class="p-4 mb-4 rounded-lg text-white 
              {% if message.tags == 'error' %}bg-red-500{% elif message.tags == 'success' %}bg-green-500{% else %}bg-blue-500{% endif %}">
              {{ message }}
            </div>
          {% endfor %}
        </div>
      {% endif %}

      <!-- BLOQUE DE CONTENIDO (aquí se inyectan las plantillas hijas) -->
      {% block content %}{% endblock %}
    </div>
  </main>

  <!-- Scripts JS si es necesario -->
  <script>
    //Cosas
  </script>
</body>
</html>
